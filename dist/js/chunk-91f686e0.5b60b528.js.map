{"version":3,"sources":["webpack:///./src/views/Dicas/create.vue?6289","webpack:///./src/views/Dicas/create.vue","webpack:///./src/views/Dicas/create.vue?34ce"],"names":["class","style","for","route","name","split","slice","toLowerCase","type","data","titulo","label","placeholder","subtitulo","data_publicacao","src","foto","readURL","changeImage","id","editor","conteudo","config","editorConfig","create","color","text","components","Input","Button","editorData","plugins","toolbar","items","setup","alertProps","content","loader","alert","router","event","obj","value","target","files","file","window","URL","createObjectURL","localStorage","getItem","usr","validate","open","key","objRequest","FormData","item","append","response","close","push","charAt","toUpperCase","render"],"mappings":"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","file":"js/chunk-91f686e0.5b60b528.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./create.vue?vue&type=style&index=0&id=9d2bd55e&lang=css\"","<template>\r\n  <div class=\"my-6\">\r\n    <h3 class=\"font-bold\">\r\n      Criar uma nova {{ route.name.split(\"/\")[0].slice(0, -1).toLowerCase() }}\r\n    </h3>\r\n    <span class=\"text-sm text-gray-500\"\r\n      >Preencha as informações abaixo e clique no botão <b>criar</b> para salvar\r\n      as alterações.\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"card shadow-sm border p-8\">\r\n    <div class=\"flex justify-between\">\r\n      <div class=\"flex flex-wrap w-1/2 flex-col\">\r\n        <div class=\"flex\">\r\n          <div class=\"flex-auto mr-3\">\r\n            <Input\r\n              type=\"default\"\r\n              v-model=\"data.titulo\"\r\n              label=\"Título\"\r\n              placeholder=\"Título da publicação\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-3 flex\">\r\n          <div class=\"flex-auto pr-3\">\r\n            <Input\r\n              type=\"default\"\r\n              v-model=\"data.subtitulo\"\r\n              label=\"Subtítulo\"\r\n              placeholder=\"Subtítulo da publicação\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-3 flex-auto\">\r\n          <div class=\"flex-auto pr-3\">\r\n            <Input\r\n              type=\"date\"\r\n              v-model=\"data.data_publicacao\"\r\n              label=\"Data de Publicação\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"flex flex-wrap w-1/2 mx-3 justify-end\">\r\n        <div class=\"block relative\">\r\n          <img\r\n            class=\"flex-auto rounded-lg shadow-lg\"\r\n            :src=\"data.foto ? readURL(data.foto) : 'https://via.placeholder.com/700x300'\"\r\n          />\r\n          <button\r\n            class=\"bg-primary rounded-md shadow-md transform hover:scale-105 px-5 py-2 absolute flex justify-center items-center font-bold\"\r\n            style=\"bottom: 20px; left: 20px\"\r\n          >\r\n            <label class=\"text-white\" for=\"logo\">Adicionar</label> <i class=\"ml-3 text-white gg-camera\"></i>\r\n            <input\r\n            @change=\"changeImage\"\r\n            class=\"absolute hidden\" id=\"logo\" type=\"file\" />\r\n\r\n          </button>\r\n        </div>\r\n\r\n      </div>\r\n      \r\n    </div>\r\n  </div>\r\n  <div class=\"flex\">\r\n    <div class=\"flex-1 p-3\">\r\n      <label class=\"text-sm text-gray-600\">Contéudo:</label>\r\n      <ckeditor :editor=\"editor\" v-model=\"data.conteudo\" :config=\"editorConfig\"></ckeditor>\r\n    </div>\r\n    <div class=\"flex-1 p-3\">\r\n      <label class=\"text-sm text-gray-600\">Demonstração</label>\r\n      <span class=\"conteudo-dica\" v-html=\"data.conteudo\">\r\n\r\n      </span>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class=\"flex justify-end mt-5\">\r\n    <Button @click=\"create\" color=\"primary\" text=\"Criar\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Input from \"../../components/Elements/Input.vue\";\r\nimport Button from \"../../components/Elements/Button.vue\";\r\nimport { inject, onMounted, ref, } from \"vue\";\r\nimport { POST } from \"../../services/api\";\r\nimport { isEmpty } from \"../../services/validate\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { decodeJwt } from \"../../services/util\"\r\nimport ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';\r\nimport EssentialsPlugin from '@ckeditor/ckeditor5-essentials/src/essentials';\r\nimport BoldPlugin from '@ckeditor/ckeditor5-basic-styles/src/bold';\r\nimport ItalicPlugin from '@ckeditor/ckeditor5-basic-styles/src/italic';\r\nimport Image from '@ckeditor/ckeditor5-image/src/image';\r\nimport ImageUpload from '@ckeditor/ckeditor5-image/src/imageupload';\r\nimport ParagraphPlugin from '@ckeditor/ckeditor5-paragraph/src/paragraph';\r\nimport Base64UploadAdapter from '@ckeditor/ckeditor5-upload/src/adapters/base64uploadadapter';\r\nimport Heading from '@ckeditor/ckeditor5-heading/src/heading';\r\nimport Alignment from '@ckeditor/ckeditor5-alignment/src/alignment';\r\nimport Font from '@ckeditor/ckeditor5-font/src/font';\r\n\r\nexport default {\r\n  name: \"criarDica\",\r\n  components: {\r\n    Input,\r\n    Button,\r\n  },\r\n\r\n  data() {\r\n      return {\r\n          editor: ClassicEditor,\r\n          editorData: '',\r\n          editorConfig: {\r\n              plugins: [\r\n                  EssentialsPlugin,\r\n                  BoldPlugin,\r\n                  ItalicPlugin,\r\n                  ParagraphPlugin,\r\n                  Base64UploadAdapter,\r\n                  Image,\r\n                  ImageUpload,\r\n                  Heading,\r\n                  Alignment,\r\n                  Font\r\n              ],\r\n              toolbar: {\r\n                  items: [\r\n                      'undo',\r\n                      'redo',\r\n                      'heading',\r\n                      'fontColor', \r\n                      'fontBackgroundColor',\r\n                      'bold',\r\n                      'italic',                      \r\n                      'uploadImage',\r\n                      'alignment',\r\n                  ]\r\n              }\r\n          }\r\n      };\r\n  },\r\n\r\n\r\n  setup() {\r\n    const alertProps = inject(\"alert\");\r\n    const data = ref({\r\n      \"titulo\": \"\",\r\n      \"subtitulo\": \"\",\r\n      \"conteudo\": \"\",\r\n      \"users_id\": \"\",\r\n      \"data_publicacao\": \"\",\r\n      \"foto\": \"\",\r\n    });\r\n\r\n    const content = ref(\"\");\r\n    const loader = inject(\"loading\");\r\n    const alert = inject(\"alert\");\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n\r\n    // onMounted(()=> {\r\n    //   console.log(ClassicEditor.);\r\n    // })\r\n\r\n\r\n    const changeImage = (event) => {\r\n      const obj = {\r\n        titulo: data.value.titulo,\r\n        subtitulo: data.value.subtitulo,\r\n        conteudo: data.value.conteudo,\r\n        ['users_id']: data.value['users_id'],\r\n        ['data_publicacao']: data.value['data_publicacao'],\r\n        foto: event.target.files[0],\r\n      }\r\n      data.value = obj;\r\n    }\r\n\r\n    const readURL = file => {\r\n      if(typeof(file) == 'string'){\r\n        return file\r\n      }\r\n      return window.URL.createObjectURL(file)\r\n    };\r\n\r\n    const create = async () => {\r\n      data.value[\"users_id\"] = decodeJwt(localStorage.getItem('token')).usr.id\r\n      const validate = isEmpty(data.value);\r\n      if (validate) {\r\n        alert.open(\"Atenção!\", validate, \"warning\");\r\n      } else {\r\n        data.value.conteudo = '<span style=\"font-family:Lato; line-height: 24px;\">' + data.value.conteudo + '</span>';\r\n        const objRequest = new FormData();\r\n        const item = data.value;\r\n        for (const key in item) {\r\n          objRequest.append(key, item[key]);\r\n        }\r\n        loader.open();\r\n        try {\r\n          const response = await POST(\"dicas\", objRequest);\r\n          alert.open(\r\n            \"Sucesso!\",\r\n            `Dica <b>${response.titulo}</b> criada com sucesso!`,\r\n            \"success\"\r\n          );\r\n          loader.close();\r\n          router.push(\"/dicas\");\r\n        } catch (e) {\r\n          alert.open(\"Atenção!\", `${e.charAt(0).toUpperCase()}${e.slice(1)}`, \"danger\");\r\n          loader.close();\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      alertProps,\r\n      data,\r\n      create,\r\n      route,\r\n      content,\r\n      changeImage,\r\n      readURL\r\n    };\r\n  },\r\n};\r\n\r\n</script>\r\n\r\n<style>\r\n.ck-content {\r\n  font-family:Lato;\r\n  line-height: 24px;\r\n}\r\n.ck-editor__editable_inline {\r\n    min-height: 400px;\r\n}\r\n.ck-content h2 {\r\n  font-size: 22px;\r\n}\r\n.ck-content h3 {\r\n  font-size: 20px;\r\n}\r\n.ck-content h4 {\r\n  font-size: 18px;\r\n}\r\n.conteudo-dica {\r\n  font-family:Lato;\r\n  line-height: 24px;\r\n}\r\n.conteudo-dica h2 {\r\n  font-size: 22px;\r\n}\r\n.conteudo-dica h3 {\r\n  font-size: 20px;\r\n}\r\n.conteudo-dica h4 {\r\n  font-size: 18px;\r\n}\r\nfigure img {\r\n  margin: 0 auto;\r\n}\r\n</style>","import { render } from \"./create.vue?vue&type=template&id=9d2bd55e\"\nimport script from \"./create.vue?vue&type=script&lang=js\"\nexport * from \"./create.vue?vue&type=script&lang=js\"\n\nimport \"./create.vue?vue&type=style&index=0&id=9d2bd55e&lang=css\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}