{"version":3,"sources":["webpack:///./src/services/formater.ts","webpack:///./src/views/Dicas/update.vue?6c12","webpack:///./src/views/Dicas/update.vue","webpack:///./src/views/Dicas/update.vue?02f1"],"names":["toMoney","n","parseFloat","toLocaleString","minimumFractionDigits","maximumFractionDigits","toDate","d","firstSplit","day","mounth","year","length","String","split","includes","toDateUS","class","style","for","data","titulo","edit","color","text","type","label","placeholder","subtitulo","data_publicacao","src","foto","readURL","changeImage","id","editor","conteudo","config","editorConfig","name","components","Input","Button","editorData","plugins","toolbar","items","setup","route","router","loader","alert","modal","profiles","preview","open","params","value","console","log","close","setPreview","profile","event","obj","target","files","file","window","URL","createObjectURL","validate","key","objRequest","FormData","item","append","push","message","charAt","toUpperCase","slice","render"],"mappings":"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","file":"js/chunk-aacedf16.851619cd.js","sourcesContent":["\r\nconst numberToCpf = (n: string) => n.replace(/(\\d{3})(\\d{3})(\\d{3})(\\d{2})/, \"$1.$2.$3-$4\");\r\nconst cpfToNumber = (n: string) => n.replace(/[^\\w\\s]/gi, '');\r\nconst toMoney = (n: string) => parseFloat(n).toLocaleString('pt-BR', {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 3\r\n  })\r\nconst toDate = (d: string): string => {\r\n    let firstSplit: string;\r\n    let day: string;\r\n    let mounth: string;\r\n    let year: string;\r\n    if(d.length > 0){\r\n        if(String(d).split(\"\").includes(\"T\")){\r\n            firstSplit = d.split(\"T\")[0];\r\n            day = firstSplit.split(\"-\")[2];\r\n            mounth = firstSplit.split(\"-\")[1];\r\n            year = firstSplit.split(\"-\")[0];\r\n        }else{\r\n            firstSplit = String(d).split(\" \")[0];\r\n            day = firstSplit.split(\"-\")[2];\r\n            mounth = firstSplit.split(\"-\")[1];\r\n            year = firstSplit.split(\"-\")[0];\r\n        }\r\n        return `${day}/${mounth}/${year}`\r\n    }\r\n    return \"\"\r\n}\r\nconst toDateUS = (d: string): string => {\r\n    const firstSplit: string = d.split(\" \")[0];\r\n    const day: string = firstSplit.split(\"-\")[2];\r\n    const mounth: string = firstSplit.split(\"-\")[1];\r\n    const year: string = firstSplit.split(\"-\")[0];\r\n    return `${year}-${mounth}-${day}`\r\n}\r\n\r\n\r\nexport { numberToCpf, cpfToNumber, toDate, toDateUS, toMoney}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./update.vue?vue&type=style&index=0&id=0ba71a74&lang=css\"","<template>\r\n  <div class=\"my-6 flex items-center justify-between\">\r\n    <div>\r\n      <h3 class=\"font-bold\">\r\n        Editar dica > <span class=\"text-primary\">{{ data.titulo }}</span>\r\n      </h3>\r\n\r\n      <span class=\"text-sm text-gray-500\"\r\n        >Verifique as informações abaixo e clique no botão <b>salvar</b> para\r\n        editar para confirmar as modificações.\r\n      </span>\r\n    </div>\r\n    <div class=\"flex justify-end\">\r\n      <Button @click=\"edit\" color=\"primary\" text=\"Salvar\" />\r\n    </div>\r\n  </div>\r\n\r\n    <div class=\"card shadow-sm border p-8\">\r\n      <div class=\"flex justify-between\">\r\n        <div class=\"flex flex-wrap w-1/2 flex-col\">\r\n          <div class=\"flex\">\r\n            <div class=\"flex-auto mr-3\">\r\n              <Input\r\n                type=\"default\"\r\n                v-model=\"data.titulo\"\r\n                label=\"Título\"\r\n                placeholder=\"Título da publicação\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-3 flex\">\r\n            <div class=\"flex-auto pr-3\">\r\n              <Input\r\n                type=\"default\"\r\n                v-model=\"data.subtitulo\"\r\n                label=\"Subtítulo\"\r\n                placeholder=\"Subtítulo da publicação\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-3 flex-auto\">\r\n            <div class=\"flex-auto pr-3\">\r\n              <Input\r\n                type=\"date\"\r\n                v-model=\"data.data_publicacao\"\r\n                label=\"Data de Publicação\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-wrap w-1/2 mx-3 justify-end\">\r\n          <div class=\"block relative\">\r\n            <img\r\n              class=\"flex-auto rounded-lg shadow-lg\"\r\n              :src=\"data.foto ? readURL(data.foto) : 'https://via.placeholder.com/700x300'\"\r\n            />\r\n            <button\r\n              class=\"bg-primary rounded-md shadow-md transform hover:scale-105 px-5 py-2 absolute flex justify-center items-center font-bold\"\r\n              style=\"bottom: 20px; left: 20px\"\r\n            >\r\n              <label class=\"text-white\" for=\"logo\">Adicionar</label> <i class=\"ml-3 text-white gg-camera\"></i>\r\n              <input\r\n              @change=\"changeImage\"\r\n              class=\"absolute hidden\" id=\"logo\" type=\"file\" />\r\n\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n  </div>\r\n  <div class=\"flex\">\r\n    <div class=\"flex-1 p-3\">\r\n      <label class=\"text-sm text-gray-600\">Contéudo:</label>\r\n      <ckeditor :editor=\"editor\" v-model=\"data.conteudo\" :config=\"editorConfig\"></ckeditor>\r\n    </div>\r\n    <div class=\"flex-1 p-3\">\r\n      <label class=\"text-sm text-gray-600\">Demonstração</label>\r\n      <span class=\"conteudo-dica\" v-html=\"data.conteudo\">\r\n\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Input from \"../../components/Elements/Input.vue\";\r\nimport Button from \"../../components/Elements/Button.vue\";\r\nimport { isEmpty } from \"../../services/validate\";\r\nimport { GET, POST } from \"../../services/api\";\r\nimport { toDate, toDateUS } from \"../../services/formater\";\r\nimport { inject, onMounted, ref } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';\r\nimport EssentialsPlugin from '@ckeditor/ckeditor5-essentials/src/essentials';\r\nimport BoldPlugin from '@ckeditor/ckeditor5-basic-styles/src/bold';\r\nimport ItalicPlugin from '@ckeditor/ckeditor5-basic-styles/src/italic';\r\nimport Image from '@ckeditor/ckeditor5-image/src/image';\r\nimport ImageUpload from '@ckeditor/ckeditor5-image/src/imageupload';\r\nimport ParagraphPlugin from '@ckeditor/ckeditor5-paragraph/src/paragraph';\r\nimport Base64UploadAdapter from '@ckeditor/ckeditor5-upload/src/adapters/base64uploadadapter';\r\nimport Heading from '@ckeditor/ckeditor5-heading/src/heading';\r\nimport Alignment from '@ckeditor/ckeditor5-alignment/src/alignment';\r\nimport Font from '@ckeditor/ckeditor5-font/src/font';\r\n\r\nexport default {\r\n  name: \"editUsers\",\r\n  components: {\r\n    Input,\r\n    Button,\r\n  },\r\n\r\n    data() {\r\n      return {\r\n          editor: ClassicEditor,\r\n          editorData: '',\r\n          editorConfig: {\r\n              plugins: [\r\n                  EssentialsPlugin,\r\n                  BoldPlugin,\r\n                  ItalicPlugin,\r\n                  ParagraphPlugin,\r\n                  Base64UploadAdapter,\r\n                  Image,\r\n                  ImageUpload,\r\n                  Heading,\r\n                  Alignment,\r\n                  Font\r\n              ],\r\n              toolbar: {\r\n                  items: [\r\n                      'undo',\r\n                      'redo',\r\n                      'heading',\r\n                      'fontColor', \r\n                      'fontBackgroundColor',\r\n                      'bold',\r\n                      'italic',                      \r\n                      'uploadImage',\r\n                      'alignment',\r\n                  ]\r\n              }\r\n          }\r\n      };\r\n  },\r\n\r\n  setup() {\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const loader = inject(\"loading\");\r\n    const alert = inject(\"alert\");\r\n    const modal = inject(\"modal\")\r\n    const data = ref({});\r\n    const profiles = ref([]);\r\n    const preview = ref(null);\r\n  \r\n    onMounted(async () => {\r\n      loader.open();\r\n      data.value = { ...(await GET(`dicas/${route.params.id}`)) };\r\n      console.log(data.value)\r\n      if(toDateUS(data.value.data_publicacao).includes(\"T\"))\r\n        data.value[\"data_publicacao\"] = toDateUS(data.value.data_publicacao).split(\"T\")[0];\r\n      if(toDateUS(data.value.data_publicacao).includes(\" \"))\r\n        data.value[\"data_publicacao\"] = toDateUS(data.value.data_publicacao).split(\" \")[0];\r\n      loader.close();\r\n    });\r\n\r\n    const setPreview = (profile) => {\r\n      preview.value = profile\r\n    }\r\n\r\n    const changeImage = (event) => {\r\n      const obj = {\r\n        titulo: data.value.titulo,\r\n        subtitulo: data.value.subtitulo,\r\n        conteudo: data.value.conteudo,\r\n        ['users_id']: data.value['users_id'],\r\n        ['data_publicacao']: data.value['data_publicacao'],\r\n        foto: event.target.files[0],\r\n      }\r\n      data.value = obj;\r\n    }\r\n\r\n    const readURL = file => {\r\n      if(typeof(file) == 'string'){\r\n        return file\r\n      }\r\n      return window.URL.createObjectURL(file)\r\n    };\r\n\r\n    const edit = async () => {\r\n      const validate = isEmpty(data.value);\r\n      if (validate) {\r\n        alert.open(\"Atenção!\", validate, \"warning\");\r\n      } else {\r\n        modal.open(\"Atenção\", \"Deseja realmente editar esse item?\", \"warning\", \"Sim\" , async () => {\r\n          try {\r\n          loader.open();\r\n          data.value[\"data_publicacao\"] = toDateUS(data.value.data_publicacao)\r\n          data.value.conteudo = '<span style=\"font-family:Lato; line-height: 24px;\">' + data.value.conteudo + '</span>';\r\n          const objRequest = new FormData();\r\n          const item = data.value;\r\n          for (const key in item) {\r\n            objRequest.append(key, item[key]);\r\n          }\r\n          const response = await POST(`dicas/${route.params.id}`, objRequest);\r\n          alert.open(\r\n            \"Sucesso!\",\r\n            `A dica de publicação foi editada com sucesso!`,\r\n            \"success\"\r\n          );\r\n          loader.close();\r\n          router.push(\"/dicas\");\r\n        } catch (e) {\r\n          loader.close();\r\n          alert.open(\"Atenção!\", `${e.message.charAt(0).toUpperCase()}${e.message.slice(1)}`, \"warning\");\r\n        }\r\n        },\r\n        modal.close())\r\n      }\r\n    };\r\n    return { edit, data, profiles, toDate, setPreview, preview, changeImage, readURL };\r\n  },\r\n};\r\n</script>\r\n<style>\r\n  .ck-content {\r\n    font-family:Lato;\r\n    line-height: 24px;\r\n  }\r\n  .ck-editor__editable_inline {\r\n    min-height: 400px;\r\n  }\r\n  .ck-content h2 {\r\n    font-size: 22px;\r\n  }\r\n  .ck-content h3 {\r\n    font-size: 20px;\r\n  }\r\n  .ck-content h4 {\r\n    font-size: 18px;\r\n  }\r\n  .conteudo-dica {\r\n    font-family:Lato;\r\n    line-height: 24px;\r\n  }\r\n  .conteudo-dica h2 {\r\n    font-size: 22px;\r\n  }\r\n  .conteudo-dica h3 {\r\n    font-size: 20px;\r\n  }\r\n  .conteudo-dica h4 {\r\n    font-size: 18px;\r\n  }\r\n  figure img {\r\n    margin: 0 auto;\r\n  }\r\n</style>","import { render } from \"./update.vue?vue&type=template&id=0ba71a74\"\nimport script from \"./update.vue?vue&type=script&lang=js\"\nexport * from \"./update.vue?vue&type=script&lang=js\"\n\nimport \"./update.vue?vue&type=style&index=0&id=0ba71a74&lang=css\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}